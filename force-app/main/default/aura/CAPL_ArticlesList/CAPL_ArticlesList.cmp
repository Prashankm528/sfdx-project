<aura:component implements="forceCommunity:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasSObjectName,force:appHostable,force:hasRecordId" controller="CAPL_ArticlesListController">

    <style>
        .slds-page-header {
        	background: white;
        	padding: .5rem 1rem;
        }
        .slds-page-header__title, .slds-page-header__title:hover {
        	color: black;
            white-space: inherit;
        }
        .slds-media__figure {
        	text-align: center;
        }

        .slds-grid {
        	border-radius: .25rem;
        }

        .title {
        	text-align:left; 
        	text-transform: uppercase; 
        	padding: .5rem 0rem; 
        	font-size: 16px;
        }
        .views {
        	color: #525759; 
        	font-size: .75rem; 
        	margin-top: -0.3rem;
        }
        .viewsCount {
        	font-size: 1.25rem
        }
        .slds-page-header__title {
        	font-size: 1rem;
        }
        .slds-text-body_small {
        	margin-top: 0.3rem;
        	color: #525759; 
        	font-size: 11px;
        }
        .img-wrapper img {       
            width: 100%;
            height: 250px;
            -o-object-fit: cover;
            object-fit: cover;
            opacity: .7;
        }

        .contentBody {
            height: 100px;
            margin-top: 16px;
            font-size: 14px;
            opacity: .75;
        }

        .contentTitle {
            font-weight: bold;
            font-size: 16px;
        }

        .contentTitleContainer {
            height: 191px;
        }

        .block-with-text-title {
            overflow : hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }

        .block-with-text {
            overflow : hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 5;
            -webkit-box-orient: vertical;
        }

        .linkToContent {
            padding: 12px;
            opacity: 0.5;
            font-family: Arial;
            font-size: 12px;
            text-align: right;
            color: #525759;
            text-transform: uppercase;
        }

        .linkToContent:hover {
            cursor:pointer;
            opacity: 1;
        }

        .articlePadding {
            padding-top: 0rem;
            padding-bottom: 1rem;
        }

        .rightArrowIcon {
            height: auto !important;
            width: 14px;
            margin-top: -3px;
            opacity: 1;
        }
    </style>
    
    <aura:handler name="init" value="{!this}" action="{!c.doInit}" />
 
    <aura:attribute name="articleList" type="sObject[]" access="public"/>

    <aura:attribute name="header" type="String" access="public" default="Top discussions"/>
    <aura:attribute name="by" type="String" access="public" default="by"/>
    <aura:attribute name="views" type="String" access="public" default="views"/>

    <div class="slds-grid_align-center slds-grid slds-wrap">
        <aura:if isTrue="{!v.articleList.length == 0}">
            No articles found
        </aura:if>
        <aura:iteration var="article" items="{!v.articleList}">
            <div class="slds-size--2-of-2 slds-medium-size--3-of-6 slds-large-size--12-of-12">
                <div class="articlePadding">
                    <div style="display: flex; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.24), 0 0 2px 0 rgba(0, 0, 0, 0.12);">
                        <div class="img-wrapper slds-size--5-of-12 slds-medium-size--5-of-12 slds-large-size--7-of-12">
                          <aura:unescapedHtml value="{!article.CAPL_ArticleImage__c}"/>
                        </div>
                        <div class="slds-size--7-of-12 slds-medium-size--7-of-12 slds-large-size--5-of-12">
                            <div class="slds-page-header contentTitleContainer">
                                <div class="contentTitle block-with-text-title" title="{!article.Title}">
                                    {!article.Title}
                                </div>
                                <div class="contentBody block-with-text" title="{!article.Summary}">
                                    {!article.Summary}
                                </div>
                            </div>
                            <div class="slds-page-header">
                                <div id="{!article.Id}" class="linkToContent" onclick="{!c.goToDetailPage}">
                                    {!v.header} &nbsp; 
                                    <img class="rightArrowIcon" src="{!$Resource.CAPL_Resources + '/CAPL_Resources/images/rightArrowIcon.png'}" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </aura:iteration>
    </div>

</aura:component>