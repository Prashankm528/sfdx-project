<!-- CDM_PicklistMapExtractor Component, which is used for show picklist for cdm eform picklist field and set values or get values  -->
<aura:component access="global">
	<aura:handler name="init" value="{!this}" action="{!c.doInit}" />
   <!-- <aura:handler name="CDM_setPicklist" event="c:CDM_setPicklist" action="{!c.doInit}" />  -->
    <aura:handler name="change" value="{!v.recPicklistMap}" action="{!c.doInit}"/> 
	 <aura:registerEvent name="CDM_setDependentPicklist" type="c:CDM_setDependentPicklist" />
    <aura:registerEvent name="CDM_AmountSplitEvt" type="c:CDM_AmountSplitEvt" />
    <aura:registerEvent name="CDM_ShowHideEvent" type="c:CDM_ShowHideEvent" />
	<aura:attribute name="FormName" type="String" />
	<aura:attribute name="disableinput" type="Boolean" />
	<aura:attribute name="depPicklistMap" type="String"/>
    <aura:attribute name="country" type="String"/>
    <aura:attribute name="parentCDMFlg" type="String" description="this flag is indicate parent cdm form"/>
    <aura:attribute name="splitAmount" type="Boolean"/>
    <aura:attribute name="splitRequired" type="String"/>
   <aura:attribute name="companyCode" type="String"/>
    <aura:attribute name="disabled" type="Boolean" default="false"/>
     <aura:attribute name="taxEndUse" type="Map" description="set tax end use for ANZ"/>
     <aura:attribute name="taxEndUseOpts" type="List" description="set tax end use for ANZ picklist options"/>  
    <aura:attribute name="paymentMethods" type="Map"/>
      <aura:attribute name="taxCodesOpts" type="List"/>
    <aura:attribute name="paymentMethodsOpts" type="List"/>
    <aura:attribute name="taxEndUseflg" type="Boolean" default="true" description="this value indicate tax end use field display or not for ANZ"/>
    <aura:attribute name="salesDocTypeVal" type="String" description="get sales doc type selected value for ANZ"/>
    <aura:attribute name="channelCode" type="String" description="Channel code value get from Distribution Channel"/>
	<aura:attribute name="Optvalues" type="string[]" />
	 <aura:attribute name="fieldsMetaDatamap" type="Map" default="{}"/> 
 
     <aura:attribute name="recPicklistMap" type="Map" />
	<aura:attribute name="datatype" type="string" />
	
	<aura:attribute name="key" type="string"
		description="stores key for map" />
	<aura:attribute name="value" type="Object"
		description="store map value based on key" />
	<form>
	<aura:if isTrue="{!and(or(v.value.CDM_DataType__c=='PICKLIST', v.value.CDM_Dependent_Field_DataType__c=='PICKLIST'),  v.value.Name != 'Split Required')}">
         <div class="slds-size_1-of-1 slds-max-small-size_1-of-1" id="{!v.key+'Picklist'}">
		<lightning:select onchange="{!c.getData}" 
                          name="{!v.value.CDM_FieldName__c}"
						  label="{!and(v.country == 'Switzerland', v.value.Name == 'Bulk Upload')? 'CSV Upload': v.value.Name}" 
                          required="{!v.value.CDM_Required__c}"
                          value="{!v.value.CDM_DefaultValue__c}"
                          disabled="{!v.value.CDM_Read_Only__c || v.disabled}">
            <aura:if isTrue="{!and(v.value.Name != 'Sales Organisation',v.value.Name != 'Division')}">
			<option value="">-- None --</option>
            </aura:if>
		<aura:if isTrue="{!v.value.Name == 'Tax End Use'}">
			<aura:iteration items="{!v.taxEndUseOpts}" var="p">
				<option value="{!p}" text="{!p}"></option>
			</aura:iteration>
            <aura:set attribute="else">
                 <aura:iteration items="{!v.Optvalues}" var="p">
				<option value="{!p}" text="{!p}"></option>
			</aura:iteration>
            </aura:set>
            </aura:if>
            
       <!--      <aura:if isTrue="{!v.value.Name == 'Payment Method'}">
			<aura:iteration items="{!v.paymentMethodsOpts}" var="p">
				<option value="{!p}" text="{!p}"></option>
			</aura:iteration>
            </aura:if>  -->
            
          <!--  <aura:if isTrue="{!and(v.value.Name != 'Tax End Use')}"> 
			<aura:iteration items="{!v.Optvalues}" var="p">
				<option value="{!p}" text="{!p}"></option>
			</aura:iteration>
            </aura:if>  -->
            
            
		</lightning:select>
        </div>
     
	</aura:if>
    
    <aura:if isTrue="{!and(v.value.CDM_DataType__c=='PICKLIST',v.value.Name == 'Split Required')}">
        <div class="slds-grid slds-wrap">
        <div class="{!v.value.CDM_DefaultValue__c == 'Yes'? 'slds-size_2-of-3' : 'slds-size_1-of-1'}">
		<lightning:select onchange="{!c.getData}" 
                          name="{!v.value.CDM_FieldName__c}"
						  label="{!v.value.Name}" 
                          required="{!v.value.CDM_Required__c}"
                          value="{!v.value.CDM_DefaultValue__c}"
                          disabled="{!v.value.CDM_Read_Only__c}">
			<option value="">-- None --</option>

			<aura:iteration items="{!v.Optvalues}" var="p">
				<option value="{!p}" text="{!p}"></option>
			</aura:iteration>
		</lightning:select>
        </div>
         <div class="{!v.value.CDM_DefaultValue__c == 'Yes'? 'slds-size_1-of-3' : 'slds-hide'}">
             <div class="slds-m-top_large slds-m-left_medium">
           <button type="button" class="slds-button" 
                   onclick="{!c.splitRequired}"> 
             <lightning:icon iconName="action:new" size="xx-small"
                              
                               />   
             </button> 
             </div>
            </div>
        </div>
     
	</aura:if>
    </form>

</aura:component>