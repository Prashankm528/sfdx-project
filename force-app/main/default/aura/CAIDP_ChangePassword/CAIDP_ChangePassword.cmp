<aura:component implements="forceCommunity:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasSObjectName,force:appHostable" controller="REIDP_ChangePasswordController">

	 <style>
<!-- 	 	button {
		    margin-left: 0 !important;
		    margin-right: 0 !important;
		    -webkit-box-shadow: none !important;
		    -moz-box-shadow: none !important;
		    box-shadow: none !important;
		    text-shadow: none !important;
		    -webkit-transition: all 0.5s ease !important;
		    transition: all 0.5s ease !important;
		    -webkit-tap-highlight-color: #018b46 !important;
		  	border-radius: 3px;
		  	background-color: #018b46 !important;
		}
		button:active {
		    background-color: #018b46 !important;
		}
		button:disabled {
		    background-color:#cccccc !important;
		    cursor:pointer !important;
		}

		button:disabled .label {
		    color: #ffffff !important;
		} -->
        .slds-modal__content {
            max-height: 500px !important;
            height: auto !important;
            overflow-y: inherit !important;
        }
        .slds-notify {
            border-radius: 5px;
            margin-bottom: 1rem;
            margin-top: 1rem;
        }
        .errorAlert {
            font-size: 1.2rem !important;
        }
        .errorMessage {
            color: red;
            text-align: left;
        }

        ::-webkit-input-placeholder { /* Chrome/Opera/Safari */
		  opacity: .5;
		}
		::-moz-placeholder { /* Firefox 19+ */
		  opacity: .5;
		}
		:-ms-input-placeholder { /* IE 10+ */
		  opacity: .5;
		}
		:-moz-placeholder { /* Firefox 18- */
		  opacity: .5;
		}
    </style>

    <aura:handler name="init" value="{!this}" action="{!c.doInit}" />

    <aura:attribute name="oldPassword" type="String" access="public" />
    <aura:attribute name="newPassword" type="String" access="public" />
    <aura:attribute name="newPasswordRepeat" type="String" access="public" />
	<aura:attribute name="errorMessage" type="String" />
	<aura:attribute name="userId" type="String" />

	<aura:attribute name="changePasswordLabel" type="String" access="public" required="true" default="Change password" />
	<aura:attribute name="closeLabel" type="String" access="public" required="true" default="Close" />
	<aura:attribute name="errorLabel" type="String" access="public" required="true" default="Error" />
	<aura:attribute name="successLabel" type="String" access="public" required="true" default="Success" />
	<aura:attribute name="policyLabel" type="String" access="public" required="true" default="Password Policy" />
	<aura:attribute name="policyStatement" type="String" access="private"/>
	<aura:attribute name="submitLabel" type="String" access="public" required="true" default="Submit" />
	<aura:attribute name="oldPasswordLabel" type="String" access="public" required="true" default="Old password" />
	<aura:attribute name="newPasswordLabel" type="String" access="public" required="true" default="New password" />
	<aura:attribute name="repeatPasswordLabel" type="String" access="public" required="true" default="Repeat password" />

    <aura:attribute name="isFieldsEmpty" type="Boolean" default="false"/>
    <aura:attribute name="isChanged" type="Boolean" default="false" />
    <aura:attribute name="isShowChangePasswordButton" type="Boolean" default="false"/>
    <aura:attribute name="isOpen" type="boolean" default="false" />
    <aura:attribute name="isShowSection" type="boolean" default="false" />
    

    <aura:if isTrue="{!v.isShowSection}">
	    <div>
	        <button style="width:100%; border-radius: .125rem; padding: 14px;" class="slds-button slds-button--brand" onclick="{!c.openModal}">{!v.changePasswordLabel}</button>

	        <aura:if isTrue="{!v.isOpen}">
	            <div role="dialog" tabindex="-1" aria-labelledby="header99" class="slds-modal slds-fade-in-open slds-size_2-of-5 slds-align_absolute-center">
	                <div class="slds-modal__container">
	                    <div class="slds-modal__header">
	                        <button class="slds-button slds-modal__close slds-button--icon-inverse" title="{!v.closeLabel}" onclick="{!c.closeModel}">
					            X
					            <span class="slds-assistive-text">{!v.closeLabel}</span>
					            </button>
	                        <h2 id="header99" class="slds-text-heading--medium">{!v.changePasswordLabel}</h2>

	                        <aura:if isTrue="{!v.isFieldsEmpty}">
					            <div class="slds-notify slds-notify_alert slds-theme_alert-texture slds-theme_error" role="alert">
					                <span class="slds-assistive-text">{!v.errorLabel}</span>
					                <p class="errorAlert" style="font-size: 1.2rem;">{!$Label.c.CastrolErrors}</p>
					            </div>
					            <div class="errorMessage" style="color:red;">
					                {!v.errorMessage}
					            </div>
					        </aura:if>
					        <aura:if isTrue="{!v.isChanged}">
					            <div class="slds-notify slds-notify_alert slds-theme_alert-texture slds-theme_success" role="alert">
					                <span class="slds-assistive-text">{!v.successLabel}</span>
					                <p class="successAlert" style="font-size: 1.2rem;">{!$Label.c.CastrolPasswordChanged}</p>
					            </div>
					        </aura:if>
	                    </div>
	                    <aura:if isTrue="{!!v.isChanged}">
		                    <div class="slds-modal__content slds-p-around--medium">
		                    	<div class="slds-scoped-notification slds-media slds-media_center slds-scoped-notification_dark" role="status">
								  <div class="slds-media__figure">
								    <span class="slds-icon_container slds-icon-utility-info" title="{!v.policyLabel}">
								      <lightning:icon iconName="utility:info" variant="info"/>
								      <span class="slds-assistive-text">{!v.policyLabel}</span>
								    </span>
								  </div>
								  <div class="slds-media__body">
								    <p>{!v.policyStatement}</p>
								  </div>
								</div>
		                    	<br/>
		                    	<div class="slds-form-element slds-m-vertical_small">
								  <div class="slds-form-element__control">
										<lightning:input type="password" aura:id="oldPassword" value="{!v.oldPassword}" label="{!v.oldPasswordLabel}" placeholder="{!v.oldPasswordLabel}" required="true" minlength="8" messageWhenBadInput="{!$Label.c.CastrolPasswordLength}" onchange="{!c.checkFields}"/>
								  </div>
								</div>
								<div class="slds-form-element slds-m-vertical_small">
								  <div class="slds-form-element__control">
								  		<lightning:input type="password" aura:id="newPassword" value="{!v.newPassword}" label="{!v.newPasswordLabel}" placeholder="{!v.newPasswordLabel}" required="true" minlength="8" messageWhenBadInput="{!$Label.c.CastrolPasswordLength}" onchange="{!c.checkFields}"/>
								  </div>
								</div>
								<div class="slds-form-element slds-m-vertical_small">
								  <div class="slds-form-element__control">
									  	<lightning:input type="password" aura:id="newPasswordRepeat" value="{!v.newPasswordRepeat}" label="{!v.repeatPasswordLabel}" placeholder="{!v.repeatPasswordLabel}" required="true" minlength="8" messageWhenBadInput="{!$Label.c.CastrolPasswordLength}" onchange="{!c.checkFields}"/>
								  </div>
								</div>
		                    </div>
		                    <div class="slds-modal__footer">
	<!-- 	                        <aura:if isTrue="{!v.isShowChangePasswordButton}"> -->
		                        	<button id="submitId" class="slds-button slds-button--brand slds-size_2-of-2 slds-box_x-small slds-align_absolute-center slds-text-align_center" disabled="disabled" onclick="{!c.changeOldPassword}">{!v.submitLabel}</button>
	<!-- 	                        </aura:if> -->
		                    </div>
	                    </aura:if>
	                </div>
	            </div>
	            <div class="slds-backdrop slds-backdrop--open"></div>
	        </aura:if>
	    </div>
	</aura:if>
</aura:component>