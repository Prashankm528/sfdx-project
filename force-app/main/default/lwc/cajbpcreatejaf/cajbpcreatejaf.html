<!--
 * @author			Venkatesh Muniyasamy
 * @date			11/12/2019
 * @group			CAJBP
 * @description		Renders JAF fields based on the recordtype choosen.
 *
 * history
 * 11/12/2019	Venkatesh Muniyasamy	    New JAF
 -->
<template>
    <!--Modal Header-->
    <div class="modal-header slds-modal__header">
        <h2 class="title slds-text-heading--medium">New JAF</h2>
    </div>
    <!--End Modal Header-->

    <!--Modal Body-->
    <div class="slds-modal__content slds-p-around_medium slds-scrollable">
        <lightning-record-edit-form object-api-name="CAJBP_Distributor_Joint_Activity_Fund__c" class="lightning-record-edit-form"
                            layout-type="full" density="comfy" onload={handleLoad} onsuccess={handleSuccess} onerror={handleError}>

            <div class="slds-is-relative">
                <template if:true={isSaving}>
                    <lightning-spinner size="medium" alternative-text="Loading"></lightning-spinner>
                </template>
                <template if:false={hasLoaded}>
                    <div style="min-height: 150px">
                        <lightning-spinner size="medium" alternative-text="Loading"></lightning-spinner>
                    </div>
                </template>
                <div class={hideCss}>
                    <div class="slds-grid slds-wrap">
                        <div class="slds-col slds-size_1-of-2 slds-truncate">
                            <lightning-input-field field-name="Name" class="jafname" value={jafName} required disabled></lightning-input-field>
                        </div>
                        <div class="slds-col slds-size_1-of-2 slds-truncate">
                            <lightning-input-field field-name="CAJBP_Joint_Business_Plan__c" value={recordId} class="jbp" disabled></lightning-input-field>
                        </div>
                        <div class="slds-col slds-size_1-of-2 slds-truncate">
                            <lightning-input-field field-name="CurrencyIsoCode" class="isoCode" value={jbpCurrencyIsoCode} required disabled></lightning-input-field>
                        </div>
                        <div class="slds-col slds-size_1-of-2 slds-truncate">
                            &nbsp;
                        </div>
                        <div class="slds-col slds-size_1-of-2 slds-truncate">
                            <lightning-input-field field-name="CAJBP_Castrol_Contribution_Amount__c" class="slds-hide" value={castrolContributionAmount}></lightning-input-field>
                            <lightning-input type="number" label="Castrol Contribution Amount" name="castrolContributionAmount" step="0.01" class="castrolcontribution" onchange={calculatetotalfund} required></lightning-input>
                        </div>
                        <div class="slds-col slds-size_1-of-2 slds-truncate">
                            <lightning-input-field field-name="CAJBP_PCastrol_Perc_of_Turnover_Exit_No__c"></lightning-input-field>
                        </div>
                        <div class="slds-col slds-size_1-of-2 slds-truncate">
                            <lightning-input-field field-name="CAJBP_Partner_Contribution_Amount__c" class="slds-hide" value={partnerContributionAmount}></lightning-input-field>
                            <lightning-input type="number" label="Partner Contribution Amount" name="partnerContributionAmount" step="0.01" class="partnercontribution" onchange={calculatetotalfund} required></lightning-input>
                        </div>
                        <div class="slds-col slds-size_1-of-2 slds-truncate">
                            <lightning-input-field field-name="CAJBP_Partner_Perc_of_Turnover_Exit_No__c"></lightning-input-field>
                        </div>
                        <div class="slds-col slds-size_1-of-2 slds-p-left_xx-small slds-p-right_xx-small slds-truncate">
                            <div class="slds-form-element">
                                <div class="slds-form-element__control">
                                    <lightning-input label="Total Joint Activity Fund" class="totalJafInput" disabled></lightning-input>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </lightning-record-edit-form>
    </div>
    <!--End of Modal Body-->

    <!--Modal Footer-->
    <div class="modal-footer slds-modal__footer">
        <template if:true={hasLoaded}>
            <template if:false={isSaving}>
                <lightning-button variant="brand" class="slds-p-right_x-small" label="Cancel" onclick={cancelJAF}></lightning-button>
                <lightning-button variant="brand" label="Save" onclick={saveJAF}></lightning-button>
            </template>
            <template if:true={isSaving}>
                <lightning-button variant="brand" class="slds-p-right_x-small" label="Cancel" onclick={cancelJAF} disabled></lightning-button>
                <lightning-button variant="brand" label="Save" onclick={saveJAF} disabled></lightning-button>
            </template>
        </template>
    </div>
    <!--End of Modal Footer-->
</template>